(function(){var e,t,n,r,s,i,o,c,a,u,p,l,f,d,g,h,m,w,v,k;r="SM_TRACK";if(!window.wx){return alert("not find wx")}a={ready:false,wx:window.wx};delete window.wx;l=window[r]={};d=["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onRecordEnd","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"];v=[{setAppMessage:{}},{setTimeLine:{}}];n="http://page.socialmaster.com.cn/wx/sns/config";s="http://page.socialmaster.com.cn/wx/sns/share";t=encodeURIComponent("http://page.socialmaster.com.cn/wx/sns/track");e=encodeURIComponent("http://page.socialmaster.cn/wx/sns/track");w=navigator.userAgent.toLowerCase();f=w.indexOf("micromessenger")!==-1;h=function(){var e,t;e={};t=location.search;if(!t){return e}t=t.slice(1).split("&");$.map(t,function(t){var n,r,s;r=t.split("="),n=r[0],s=r[1];return e[n]=decodeURIComponent(s)});return e};g=function(e,t){var n,r;if(!l.DEBUG){return}if(!t){t=e;e=""}n=$("#sm-track-log");if(!n.length){n=$('<div id="sm-track-log"></div>');$("body").append(n)}if("object"===$.type(t)){t=JSON.stringify(t)}r="<p>"+e+": "+t;r+="</p>";return n.prepend(r)};m={get:function(e){return sessionStorage.getItem(e)},set:function(e,t){sessionStorage.setItem(e,t);return t},del:function(e){return sessionStorage.removeItem(e)}};u=function(n,r){var s,i,o,c;i=a.data;if(n){n="%3F"+encodeURIComponent(n)}else{n=""}s=((o=i.app)!=null?o.version:void 0)==="premium"?i.appid:"wx9aeefcca98bc48c0";if(i.appid||i.authorizer_appid&&((c=i.version)==="0"||c==="1")){return["https://open.weixin.qq.com/connect/oauth2/authorize?appid="+s,"&redirect_uri="+t+"%2F"+s+n+"&response_type=code&scope="+i.scope,"&state="+i.state.trackId+"."+i.state.pcode+".c-"+(1+i.state.c)+"."+r+".k-"+i.state.k].join("")}if(!i.appid&&i.authorizer_appid&&i.version==="2"){return["https://open.weixin.qq.com/connect/oauth2/authorize?appid="+i.authorizer_appid,"&redirect_uri="+e+n+"&response_type=code&scope="+i.scope,"&state="+i.state.trackId+"."+i.state.pcode+".c-"+(1+i.state.c)+"."+r+".k-"+i.state.k,"&component_appid=wxcb8aa52b99731eb3"].join("")}return alert("err getLink")};p=function(e,t){var n;if("string"===$.type(e)){return e}if($.isFunction(e)){try{n=e()}catch(r){n=t}return n}return t};i=function(e){var t;t={title:p(e.title),imgUrl:p(e.imgUrl),desc:p(e.desc),success:function(t){var n;g("share.msg.success",t);try{if($.isFunction(e.success)){e.success()}}catch(i){}n=m.get(r);return $.getJSON(s+n+"&t=msg&callback=?",function(e){return g("share.msg.cb",e)})},cancel:e.cancel||function(){},link:function(){var t;t=p(e.qs,"");return u(t,"f-msg")}()};g("msg.link",t.link);return a.wx.onMenuShareAppMessage(t)};c=function(e){var t;t={title:p(e.title),imgUrl:p(e.imgUrl),success:function(t){var n;g("share.tln.success",t);try{if($.isFunction(e.success)){e.success()}}catch(i){}n=m.get(r);return $.getJSON(s+n+"&t=tln&callback=?",function(e){return g("share.tln.cb",e)})},cancel:e.cancel||function(){},link:function(){var t;t=p(e.qs,"");return u(t,"f-tln")}()};g("tln.link",t.link);return a.wx.onMenuShareTimeline(t)};o=function(e){var t;t={title:p(e.title),imgUrl:p(e.imgUrl),desc:p(e.desc),success:function(t){var n;g("share.qq.success",t);try{if($.isFunction(e.success)){e.success()}}catch(i){}n=m.get(r);return $.getJSON(s+n+"&t=qq&callback=?",function(e){return g("share.qq.cb",e)})},cancel:e.cancel||function(){},link:function(){var t,n,r;r=[location.protocol,"//",location.hostname,location.pathname].join("");n=h();delete n.state;delete n.openid;if(!$.isEmptyObject(n)){r+="?"+$.param(n)}t=p(e.qs,"");if(t){r+="&"+t}return r}()};g("qq.link",t.link);return a.wx.onMenuShareQQ(t)};l.setAppMessage=function(e){if(a.ready){return i(e)}else{return v.push({setAppMessage:e})}};l.setTimeLine=function(e){if(a.ready){return c(e)}else{return v.push({setTimeLine:e})}};l.setQQ=function(e){if(a.ready){return o(e)}else{return v.push({setQQ:e})}};l.getUserinfo=function(e){if(a.ready){return e(a.error,a.userinfo)}else{return v.push({getUserinfo:e})}};l.getWx=function(e){if(a.ready){return e(a.error,a.wx)}else{return v.push({getWx:e})}};k=function(e){var t,n,r,s;g("wx.ready");a.ready=true;a.userinfo=e.userinfo;delete e.userinfo;s=[];for(n=0,r=v.length;n<r;n++){t=v[n];if($.isFunction(t.getUserinfo)){s.push(t.getUserinfo(a.error,a.userinfo))}else if($.isFunction(t.getWx)){s.push(t.getWx(a.error,a.wx))}else if(t.setAppMessage){s.push(i(t.setAppMessage))}else if(t.setTimeLine){s.push(c(t.setTimeLine))}else if(t.setQQ){s.push(o(t.setQQ))}else{continue}}return s};$(function(){var e;g("location.href",location.href);g("userAgent",navigator.userAgent);e=m.get(r);if(!e){e=m.set(r,location.search)}g("search",e);return $.getJSON(n+(e||"?")+"&callback=?",function(e){var t,n;g("conf jsonp",e);if(e.error){return m.del(r)}a.data=e;t={debug:false,appId:e.appid||e.authorizer_appid,timestamp:e.timestamp,nonceStr:e.noncestr,signature:e.signature,jsApiList:d};n=a.wx;n.config(t);n.ready(function(){n.showOptionMenu();return k(e)});n.error(function(e){g("conf error",e);return a.error=e});if(l.DEBUG&&!f){return k(e)}})})}).call(this);